    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Naveo AI</title>
    <link rel="stylesheet" href="/styles.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script defer src="/app.js"></script>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html {
        overflow-x: hidden;
        width: 100%;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        background: #f8f9fa;
        color: #1a1a1a;
        width: 100%;
        overflow-x: hidden;
      }
      .container {
        display: flex;
        height: 100vh;
        overflow: hidden;
        width: 100%;
      }

      /* Left Panel */
      .left {
        width: 420px;
        min-width: 300px;
        max-width: 60%;
        background: #fff;
        border-right: 1px solid #e0e0e0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: relative;
      }

      /* Resize Handle */
      .resize-handle {
        position: absolute;
        right: -4px;
        top: 0;
        bottom: 0;
        width: 8px;
        cursor: col-resize;
        z-index: 10;
        background: transparent;
        transition: background 0.2s;
      }
      .resize-handle:hover {
        background: rgba(16, 185, 129, 0.2);
      }
      .resize-handle.active {
        background: rgba(16, 185, 129, 0.4);
      }
      .resize-handle::before {
        content: "";
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 2px;
        height: 40px;
        background: #10b981;
        border-radius: 1px;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .resize-handle:hover::before,
      .resize-handle.active::before {
        opacity: 1;
      }
      .left-header {
        padding: 12px;
        border-bottom: 1px solid #e0e0e0;
      }
      .left-header h1 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
      }

      /* Flight Search Form */
      .search-form {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
      }
      .toggle-group {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
      }
      .toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        cursor: pointer;
      }
      .toggle-switch {
        width: 44px;
        height: 24px;
        background: #e0e0e0;
        border-radius: 12px;
        position: relative;
        transition: all 0.3s;
      }
      .toggle-switch.active {
        background: #10b981;
      }
      .toggle-switch::after {
        content: "";
        position: absolute;
        width: 18px;
        height: 18px;
        background: white;
        border-radius: 50%;
        top: 3px;
        left: 3px;
        transition: all 0.3s;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }
      .toggle-switch.active::after {
        left: 23px;
      }
      .info-icon {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #e0e0e0;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        cursor: help;
      }

      .route-inputs {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
      }
      .input-field {
        flex: 1;
        position: relative;
      }
      .input-field input {
        width: 100%;
        padding: 14px 16px 14px 44px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 15px;
        transition: all 0.3s;
      }
      .input-field input:focus {
        outline: none;
        border-color: #10b981;
      }
      .input-icon {
        position: absolute;
        left: 14px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
      }
      .swap-btn {
        width: 40px;
        height: 40px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        background: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        flex-shrink: 0;
      }
      .swap-btn:hover {
        border-color: #10b981;
        transform: rotate(180deg);
      }

      .date-passenger-row {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
      }
      .date-input {
        flex: 1;
        position: relative;
      }
      .date-input input {
        width: 100%;
        padding: 14px 16px 14px 40px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 15px;
      }
      .date-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
      }
      .passenger-input {
        width: 140px;
        position: relative;
      }
      .passenger-input input {
        width: 100%;
        padding: 14px 16px 14px 40px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 15px;
      }

      .filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 16px;
      }
      .filter-tag {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        background: #f0f9ff;
        border: 1px solid #10b981;
        border-radius: 20px;
        font-size: 13px;
        color: #10b981;
      }
      .filter-tag .close {
        cursor: pointer;
        font-weight: bold;
      }

      .search-btn {
        width: 100%;
        padding: 14px;
        background: #10b981;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      .search-btn:hover {
        background: #059669;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      }

      /* Chat Section */
      .chat-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .chat-header {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .chat-header h2 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
      }
      .chat-content {
        flex: 1;
        padding: 16px 12px;
        overflow-y: auto;
        overflow-x: hidden;
        width: 100%;
      }
      .suggestions {
        margin-bottom: 20px;
        width: 100%;
      }
      .suggestions p {
        margin: 0 0 12px 0;
        font-size: 14px;
        color: #666;
      }
      .suggestion-btn {
        display: block;
        width: 100%;
        text-align: left;
        padding: 12px 16px;
        margin-bottom: 8px;
        background: #f8f9fa;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 14px;
      }
      .suggestion-btn:hover {
        background: #e9ecef;
        border-color: #10b981;
        transform: translateX(4px);
      }
      .suggestion-btn::before {
        content: "‚≠ê ";
      }

      .chat-messages {
        min-height: 100px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 100%;
      }
      .msg {
        padding: 14px 8px;
        border-radius: 12px;
        max-width: 95%;
        animation: slideIn 0.3s ease-out;
        word-wrap: break-word;
        line-height: 1.5;
        box-sizing: border-box;
      }
      .msg.details-form {
        background: #ffffff;
        border: 1px solid #dbeafe;
        box-shadow: 0 12px 24px rgba(16, 185, 129, 0.08);
      }
      .details-form-card {
        display: flex;
        flex-direction: column;
        gap: 18px;
      }
      .details-form-header {
        display: flex;
        gap: 14px;
        align-items: center;
      }
      .details-form-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        flex-shrink: 0;
      }
      .details-form-icon svg {
        width: 24px;
        height: 24px;
      }
      .details-form-text {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .details-form-header h4 {
        margin: 0 0 4px;
        font-size: 16px;
        font-weight: 600;
        color: #0f172a;
        line-height: 1.2;
      }
      .details-form-header p {
        margin: 0;
        color: #64748b;
        font-size: 13px;
        line-height: 1.4;
      }
      .details-form-grid {
        display: grid;
        gap: 14px;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      }
      .details-form-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
        font-size: 13px;
        color: #0f172a;
        font-weight: 600;
      }
      .details-form-group input,
      .details-form-group select {
        padding: 10px 12px;
        border: 1px solid #dbeafe;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        color: #0f172a;
        background: #f8fafc;
        transition: border 0.2s, box-shadow 0.2s;
      }
      .details-form-group input:focus,
      .details-form-group select:focus {
        outline: none;
        border-color: #38bdf8;
        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.2);
      }
      .details-form-group sup {
        color: #ef4444;
        font-size: 11px;
      }
      .details-form-checkbox {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        border: 1px solid #dbeafe;
        border-radius: 10px;
        background: #f8fafc;
        font-size: 13px;
        color: #0f172a;
        font-weight: 500;
      }
      .details-form-checkbox input {
        width: 18px;
        height: 18px;
        accent-color: #10b981;
      }
      .details-form-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: flex-end;
        align-items: center;
        margin-top: 4px;
      }
      .details-form-submit,
      .details-form-skip {
        padding: 11px 20px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        border: none;
        transition: all 0.2s ease;
      }
      .details-form-submit {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: #ffffff;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
      }
      .details-form-submit:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      .details-form-skip {
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
        color: #475569;
      }
      .details-form-submit:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba(16, 185, 129, 0.3);
        background: linear-gradient(135deg, #059669 0%, #047857 100%);
      }
      .details-form-skip:hover {
        background: #e2e8f0;
        border-color: #cbd5e1;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .msg.user {
        background: #10b981;
        color: white;
        margin-left: auto;
        align-self: flex-end;
      }
      .msg.bot {
        background: #f0f9ff;
        color: #1a1a1a;
        align-self: flex-start;
        white-space: pre-wrap;
      }

      .chat-input-wrapper {
        padding: 16px 12px;
        border-top: 1px solid #e0e0e0;
      }
      .chat-input {
        display: flex;
        gap: 12px;
      }
      .chat-input input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 24px;
        font-size: 14px;
        transition: all 0.3s;
      }
      .chat-input input:focus {
        outline: none;
        border-color: #10b981;
      }
      .chat-input button {
        width: 40px;
        height: 40px;
        border: none;
        background: #10b981;
        color: white;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        flex-shrink: 0;
      }
      .chat-input button:hover {
        background: #059669;
        transform: scale(1.1);
      }

      /* Right Panel */
      .right {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: #f8f9fa;
        overflow: hidden;
      }
      .right-header {
        padding: 20px;
        border-bottom: 1px solid #e0e0e0;
        background: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
      }
      .right-header h2 {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
      }
      .header-actions {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      .nav-links {
        display: flex;
        gap: 20px;
      }
      .nav-links a {
        color: #666;
        text-decoration: none;
        font-size: 14px;
        transition: color 0.3s;
        white-space: nowrap;
      }
      .nav-links a:hover {
        color: #10b981;
      }

      .map-container {
        flex: 1;
        position: relative;
        margin: 20px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        animation: fadeIn 0.5s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      #map {
        width: 100%;
        height: 100%;
      }

      .trip-form-container {
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08);
        border: 1px solid rgba(148, 163, 184, 0.04);
        margin-bottom: 20px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .trip-form-container:hover {
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
        transform: translateY(-2px);
      }
      body.dark-mode .trip-form-container {
        background: #111827;
        border-color: rgba(30, 41, 59, 0.9);
        box-shadow: 0 12px 32px rgba(15, 23, 42, 0.45);
      }
      .trip-form-top {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        align-items: center;
        flex-wrap: wrap;
      }
      .trip-type-toggle {
        display: inline-flex;
        background: #f1f5f9;
        padding: 4px;
        border-radius: 999px;
        gap: 4px;
      }
      body.dark-mode .trip-type-toggle {
        background: rgba(30, 41, 59, 0.9);
      }
      .trip-type-btn {
        border: none;
        background: transparent;
        padding: 8px 16px;
        border-radius: 999px;
        font-size: 13px;
        font-weight: 600;
        color: #64748b;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .trip-type-btn.active {
        background: white;
        color: #0f172a;
        box-shadow: 0 6px 18px rgba(15, 23, 42, 0.15);
      }
      body.dark-mode .trip-type-btn {
        color: #cbd5f5;
      }
      body.dark-mode .trip-type-btn.active {
        background: #2563eb;
        color: #f8fafc;
        box-shadow: 0 6px 18px rgba(37, 99, 235, 0.35);
      }
      .hidden-city-control {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-size: 12px;
        color: #64748b;
        cursor: pointer;
        user-select: none;
      }
      .hidden-city-control input {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }
      .toggle-pill {
        width: 44px;
        height: 24px;
        border-radius: 999px;
        background: #e2e8f0;
        position: relative;
        transition: all 0.2s ease;
      }
      .toggle-pill::after {
        content: "";
        position: absolute;
        top: 3px;
        left: 3px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: white;
        box-shadow: 0 4px 8px rgba(15, 23, 42, 0.18);
        transition: all 0.2s ease;
      }
      .hidden-city-control input:checked + .toggle-pill {
        background: #10b981;
      }
      .hidden-city-control input:checked + .toggle-pill::after {
        transform: translateX(20px);
      }
      .hidden-city-label {
        font-weight: 600;
        letter-spacing: 0.02em;
      }
      body.dark-mode .hidden-city-label {
        color: #d1d5db;
      }
      .trip-form {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 18px;
      }
      .form-row {
        display: flex;
        gap: 12px;
        align-items: flex-end;
        flex-wrap: wrap;
      }
      .form-row .swap-btn {
        margin-bottom: 2px;
      }
      .form-field {
        display: flex;
        flex-direction: column;
        flex: 1;
        min-width: 180px;
        gap: 6px;
        position: relative;
      }
      .form-field.full {
        flex: 1 0 100%;
      }
      .field-label {
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #64748b;
      }
      body.dark-mode .field-label {
        color: #94a3b8;
      }
      .field-input,
      .field-trigger {
        border: 1px solid #d7dde6;
        background: #f8fafc;
        border-radius: 12px;
        padding: 14px 16px;
        font-size: 15px;
        font-weight: 500;
        color: #0f172a;
        transition: all 0.2s ease;
        width: 100%;
        box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.16);
      }
      .field-input:focus {
        outline: none;
        border-color: #10b981;
        background: white;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.18);
      }
      body.dark-mode .field-input,
      body.dark-mode .field-trigger {
        background: #1e293b;
        border-color: rgba(148, 163, 184, 0.24);
        color: #e2e8f0;
        box-shadow: inset 0 1px 0 rgba(15, 23, 42, 0.45);
      }
      body.dark-mode .field-input:focus {
        background: #0f172a;
        border-color: #22c55e;
        box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25);
      }
      .field-input:disabled {
        background: #e2e8f0;
        color: #94a3b8;
        cursor: not-allowed;
      }
      body.dark-mode .field-input:disabled {
        background: rgba(30, 41, 59, 0.6);
        color: rgba(148, 163, 184, 0.5);
      }
      .field-trigger {
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        gap: 12px;
      }
      .field-trigger span {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
      }
      .field-suffix {
        font-size: 12px;
        font-weight: 600;
        color: #10b981;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }
      .field-highlight .field-input,
      .field-highlight .field-trigger {
        border-color: #10b981;
        box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
        background: white;
      }
      body.dark-mode .field-highlight .field-input,
      body.dark-mode .field-highlight .field-trigger {
        background: #0f172a;
      }
      .form-note {
        font-size: 13px;
        color: #64748b;
      }
      .stops-group {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .stop-chip {
        border: 1px solid rgba(15, 23, 42, 0.1);
        background: white;
        color: #0f172a;
        border-radius: 999px;
        padding: 8px 16px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .stop-chip.active {
        background: #10b981;
        color: white;
        border-color: #10b981;
        box-shadow: 0 10px 24px rgba(16, 185, 129, 0.25);
      }
      body.dark-mode .stop-chip {
        background: rgba(15, 23, 42, 0.8);
        border-color: rgba(148, 163, 184, 0.24);
        color: #e2e8f0;
      }
      body.dark-mode .stop-chip.active {
        background: #22c55e;
        border-color: #22c55e;
        color: #0f172a;
      }
      .form-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
      }
      .trip-submit {
        background: #10b981;
        color: white;
        border: none;
        border-radius: 14px;
        padding: 14px 28px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .trip-submit:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 28px rgba(16, 185, 129, 0.28);
      }
      .trip-submit svg {
        width: 18px;
        height: 18px;
      }
      body.dark-mode .trip-submit {
        background: #22c55e;
        color: #052e16;
      }
      .form-error {
        color: #dc2626;
        font-weight: 600;
        font-size: 13px;
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      body.dark-mode .form-error {
        color: #f87171;
      }
      .form-error.visible {
        opacity: 1;
      }
      .passenger-field {
        position: relative;
      }
      .passenger-popover {
        position: absolute;
        right: 0;
        top: calc(100% + 12px);
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 50px rgba(15, 23, 42, 0.22);
        padding: 16px;
        width: 260px;
        z-index: 20;
        border: 1px solid #e2e8f0;
        display: none;
      }
      .passenger-popover.open {
        display: block;
      }
      body.dark-mode .passenger-popover {
        background: #0f172a;
        border-color: rgba(148, 163, 184, 0.24);
        box-shadow: 0 20px 50px rgba(2, 6, 23, 0.75);
      }
      .passenger-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid rgba(15, 23, 42, 0.08);
      }
      .passenger-row:last-child {
        border-bottom: none;
      }
      body.dark-mode .passenger-row {
        border-color: rgba(148, 163, 184, 0.12);
      }
      .passenger-row strong {
        font-size: 14px;
        display: block;
        color: #0f172a;
      }
      .passenger-row span {
        font-size: 12px;
        color: #64748b;
      }
      body.dark-mode .passenger-row strong {
        color: #e2e8f0;
      }
      body.dark-mode .passenger-row span {
        color: #94a3b8;
      }
      .counter-controls {
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }
      .counter-btn {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        border: 1px solid rgba(15, 23, 42, 0.2);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        font-weight: 600;
        background: white;
        color: #0f172a;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .counter-btn:hover {
        background: #10b981;
        color: white;
        border-color: #10b981;
      }
      body.dark-mode .counter-btn {
        background: rgba(15, 23, 42, 0.85);
        color: #e2e8f0;
        border-color: rgba(148, 163, 184, 0.24);
      }
      body.dark-mode .counter-btn:hover {
        background: #22c55e;
        color: #052e16;
        border-color: #22c55e;
      }
      .counter-value {
        font-weight: 700;
        width: 24px;
        text-align: center;
        color: #0f172a;
      }
      body.dark-mode .counter-value {
        color: #f8fafc;
      }
      .passenger-footer {
        display: flex;
        justify-content: flex-end;
        margin-top: 12px;
      }
      .passenger-done {
        border: none;
        background: #10b981;
        color: white;
        border-radius: 12px;
        padding: 8px 16px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
      }
      body.dark-mode .passenger-done {
        background: #22c55e;
        color: #052e16;
      }

      .results-section {
        padding: 20px;
        overflow-y: auto;
      }
      .results-header {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 16px;
      }
      .flight-list {
        display: flex;
        flex-direction: column;
        gap: 0;
        margin-top: 0;
      }
      .flight-card {
        background: white;
        border: 1px solid #e0e0e0;
        border-top: none;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 20px;
        transition: all 0.2s;
        animation: slideUp 0.4s ease-out;
      }
      .flight-card:first-child {
        border-top: 1px solid #e0e0e0;
        border-radius: 12px 12px 0 0;
        margin-top: 0;
      }
      .flight-card:last-child {
        border-radius: 0 0 12px 12px;
      }
      .flight-card:hover {
        background: #f8f9fa;
      }
      .flight-logo {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: #e0e0e0;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      .flight-logo img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
      }
      .flight-info {
        flex: 1;
        display: flex;
        align-items: center;
        gap: 40px;
      }
      .flight-times {
        display: flex;
        align-items: center;
        gap: 20px;
        flex: 1;
      }
      .flight-time {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .flight-time-code {
        font-size: 18px;
        font-weight: 600;
      }
      .flight-time-hour {
        font-size: 14px;
        color: #666;
      }
      .flight-route {
        position: relative;
        flex: 1;
        display: flex;
        align-items: center;
      }
      .flight-route-line {
        height: 2px;
        background: #e0e0e0;
        flex: 1;
      }
      .flight-route-label {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        padding: 0 8px;
        font-size: 12px;
        color: #666;
      }
      .flight-duration {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 80px;
      }
      .flight-duration-time {
        font-size: 14px;
        font-weight: 500;
      }
      .flight-duration-date {
        font-size: 12px;
        color: #666;
      }
      .flight-price {
        text-align: right;
        min-width: 100px;
      }
      .flight-price-amount {
        font-size: 24px;
        font-weight: 600;
      }
      .flight-price-airline {
        font-size: 14px;
        color: #666;
        margin-top: 4px;
      }
      .flight-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 8px;
        align-items: center;
      }
      .flight-action-link {
        color: #10b981;
        text-decoration: none;
        font-size: 13px;
      }
      .flight-actions-more {
        position: relative;
      }
      .flight-more-btn {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 6px 12px;
        font-size: 12px;
        font-weight: 500;
        color: #0f766e;
        background: #ecfdf5;
        border: 1px solid #d1fae5;
        border-radius: 999px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .flight-more-btn:hover,
      .flight-more-btn:focus {
        outline: none;
        background: #d1fae5;
        border-color: #10b981;
        color: #047857;
      }
      .flight-more-dropdown {
        display: none;
        position: absolute;
        top: calc(100% + 6px);
        right: 0;
        min-width: 140px;
        padding: 8px;
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        box-shadow: 0 18px 30px rgba(15, 23, 42, 0.15);
        z-index: 20;
        flex-direction: column;
        gap: 6px;
      }
      .flight-more-dropdown.open {
        display: flex;
      }
      .flight-more-dropdown .flight-action-link {
        display: block;
        padding: 4px 0;
      }

      .cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
      }
      .card {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s;
        animation: slideUp 0.4s ease-out;
      }
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      }
      .card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        background: #f0f0f0;
        display: block;
      }
      .card-content {
        padding: 20px;
      }
      .card-title {
        font-weight: 600;
        font-size: 18px;
        margin-bottom: 12px;
      }
      .card-detail {
        font-size: 14px;
        color: #666;
        margin: 8px 0;
      }
      .card-rating {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        background: #f0f9ff;
        color: #10b981;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 13px;
        font-weight: 500;
      }
      .card-link {
        display: inline-block;
        margin-top: 16px;
        color: #10b981;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
      }
      .card-link:hover {
        text-decoration: underline;
      }

      .travel-plan-card {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 24px;
        white-space: pre-wrap;
        line-height: 1.8;
        color: #333;
        font-size: 15px;
        animation: slideUp 0.4s ease-out;
      }
      .travel-plan-card h3 {
        color: #10b981;
        margin-top: 24px;
        margin-bottom: 12px;
        font-size: 18px;
      }
      .travel-plan-card h3:first-child {
        margin-top: 0;
      }

      .toggle-view-btn {
        padding: 8px 16px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        background: white;
        cursor: pointer;
        font-size: 14px;
        display: none;
        align-items: center;
        gap: 8px;
      }
      .toggle-view-btn:hover {
        background: #f8f9fa;
        border-color: #10b981;
      }

      .tab-btn.active {
        color: #10b981 !important;
        border-bottom-color: #10b981 !important;
        font-weight: 600 !important;
      }
      .tab-btn:hover {
        color: #10b981;
        background: rgba(16, 185, 129, 0.05);
        border-radius: 8px 8px 0 0;
      }
      .tab-content {
        animation: fadeIn 0.3s ease-out;
      }

      .loading {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid #e0e0e0;
        border-top-color: #10b981;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Enhanced UI improvements */
      .right-header {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }
      .left-header {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }
      .chat-header {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
      }

      .msg.bot {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }
      .msg.user {
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
      }

      .flight-card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        transition: all 0.3s;
      }
      .flight-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
      }

      .card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }
      .card:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      }

      .travel-plan-card {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }

      .search-results-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      .search-result-card {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 20px;
        transition: all 0.3s;
        animation: slideUp 0.4s ease-out;
      }
      .search-result-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
      }
      .search-result-title {
        font-size: 18px;
        font-weight: 600;
        color: #10b981;
        margin-bottom: 8px;
      }
      .search-result-title a {
        color: #10b981;
        text-decoration: none;
      }
      .search-result-title a:hover {
        text-decoration: underline;
      }
      .search-result-snippet {
        color: #666;
        line-height: 1.6;
        margin-bottom: 8px;
      }
      .search-result-link {
        color: #999;
        font-size: 13px;
        text-decoration: none;
      }
      .search-result-link:hover {
        color: #10b981;
      }

      .tabs {
        background: white;
        padding: 0 20px;
        border-radius: 12px 12px 0 0;
        display: flex;
        gap: 8px;
        border-bottom: 2px solid #e0e0e0;
        overflow-x: auto;
        margin-bottom: 20px;
      }
      .tab-btn {
        padding: 12px 24px;
        border: none;
        background: none;
        cursor: pointer;
        font-size: 15px;
        font-weight: 500;
        color: #666;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
        transition: all 0.3s;
        white-space: nowrap;
        flex-shrink: 0;
      }

      .tab-content {
        animation: fadeIn 0.3s ease-out;
      }
      #tab-flights,
      #tab-hotels,
      #tab-plan {
        padding-top: 0;
      }

      /* Smooth transitions */
      * {
        transition: background-color 0.2s ease, color 0.2s ease,
          border-color 0.2s ease;
      }

      /* Better scrollbar */
      .chat-content::-webkit-scrollbar,
      .results-section::-webkit-scrollbar {
        width: 8px;
      }
      .chat-content::-webkit-scrollbar-track,
      .results-section::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      .chat-content::-webkit-scrollbar-thumb,
      .results-section::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      .chat-content::-webkit-scrollbar-thumb:hover,
      .results-section::-webkit-scrollbar-thumb:hover {
        background: #a1a1a1;
      }

      /* Voice button */
      .voice-btn {
        width: 40px;
        height: 40px;
        border: none;
        background: transparent;
        color: #666;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        flex-shrink: 0;
      }
      .voice-btn:hover {
        background: #f0f0f0;
        color: #10b981;
      }
      .voice-btn.recording {
        background: #fee;
        color: #e00;
        animation: pulse 1.5s infinite;
      }
      .voice-btn.active {
        background: #e6f7f0;
        color: #10b981;
      }
      .voice-btn.active:hover {
        background: #d1f2e6;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Flight table in chat */
      .flight-table-wrapper {
        margin: 12px 0;
        overflow-x: auto;
        width: 100%;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
        position: relative;
      }
      .flight-table {
        width: 100%;
        min-width: 650px;
        border-collapse: collapse;
        font-size: 13px;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        table-layout: auto;
      }
      .flight-table th {
        background: #10b981;
        color: white;
        padding: 10px 2px;
        text-align: left;
        font-weight: 600;
        font-size: 12px;
        white-space: nowrap;
      }
      .flight-table td {
        padding: 10px 2px;
        border-bottom: 1px solid #e0e0e0;
        white-space: nowrap;
      }
      .flight-table tr:last-child td {
        border-bottom: none;
      }
      .flight-table tr:hover {
        background: #f8f9fa;
      }
      .flight-table .airline-cell {
        display: flex;
        align-items: center;
        gap: 3px;
        white-space: nowrap;
      }
      .flight-table .airline-logo-small {
        width: 22px;
        height: 22px;
        border-radius: 50%;
        object-fit: cover;
        flex-shrink: 0;
      }
      .flight-table th:nth-child(1),
      .flight-table td:nth-child(1) {
        min-width: 95px;
        max-width: 105px;
        padding-left: 4px;
      }
      .flight-table th:nth-child(2),
      .flight-table td:nth-child(2) {
        min-width: 80px;
        max-width: 90px;
      }
      .flight-table th:nth-child(3),
      .flight-table td:nth-child(3) {
        min-width: 80px;
        max-width: 90px;
      }
      .flight-table th:nth-child(4),
      .flight-table td:nth-child(4) {
        min-width: 60px;
        max-width: 70px;
        text-align: center;
      }
      .flight-table th:nth-child(5),
      .flight-table td:nth-child(5) {
        min-width: 70px;
        max-width: 80px;
        text-align: center;
      }
      .flight-table th:nth-child(6),
      .flight-table td:nth-child(6) {
        min-width: 120px;
        text-align: right;
        font-weight: 600;
        padding-right: 20px;
      }
      .flight-table-wrapper::-webkit-scrollbar {
        height: 8px;
      }
      .flight-table-wrapper::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      .flight-table-wrapper::-webkit-scrollbar-thumb {
        background: #10b981;
        border-radius: 4px;
      }
      .flight-table-wrapper::-webkit-scrollbar-thumb:hover {
        background: #059669;
      }

      /* Dark mode - improved styling */
      body.dark-mode {
        background: #0f0f0f;
        color: #e5e5e5;
      }
      body.dark-mode .left {
        background: #1a1a1a;
        border-right-color: #2d2d2d;
      }
      body.dark-mode .right {
        background: #0f0f0f;
      }
      body.dark-mode .left-header,
      body.dark-mode .right-header,
      body.dark-mode .chat-header {
        background: #1a1a1a;
        border-bottom-color: #2d2d2d;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }
      body.dark-mode .msg.bot {
        background: #252525;
        color: #e5e5e5;
        border: 1px solid #2d2d2d;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }
      body.dark-mode .msg.details-form {
        background: #1f2937;
        border-color: #334155;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.6);
      }
      body.dark-mode .details-form-icon {
        background: linear-gradient(135deg, #059669 0%, #0f766e 100%);
      }
      body.dark-mode .details-form-header h4 {
        color: #f1f5f9;
      }
      body.dark-mode .details-form-header p {
        color: #94a3b8;
      }
      body.dark-mode .details-form-group {
        color: #e2e8f0;
      }
      body.dark-mode .details-form-group input,
      body.dark-mode .details-form-group select {
        background: #111827;
        border-color: #334155;
        color: #e2e8f0;
      }
      body.dark-mode .details-form-checkbox {
        background: #111827;
        border-color: #334155;
        color: #cbd5f5;
      }
      body.dark-mode .details-form-skip {
        background: #1e293b;
        border-color: #475569;
        color: #cbd5e1;
      }
      body.dark-mode .details-form-skip:hover {
        background: #334155;
        border-color: #64748b;
      }
      body.dark-mode .details-form-submit {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }
      body.dark-mode .details-form-submit:hover:not(:disabled) {
        background: linear-gradient(135deg, #059669 0%, #047857 100%);
      }
      body.dark-mode .msg.user {
        background: #10b981;
        color: white;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      }
      body.dark-mode .chat-content {
        background: #1a1a1a;
      }
      body.dark-mode .chat-input-wrapper {
        background: #1a1a1a;
        border-top-color: #2d2d2d;
      }
      body.dark-mode .chat-input input {
        background: #252525;
        border-color: #2d2d2d;
        color: #e5e5e5;
      }
      body.dark-mode .chat-input input::placeholder {
        color: #666;
      }
      body.dark-mode .chat-input input:focus {
        border-color: #10b981;
        background: #2a2a2a;
      }
      body.dark-mode .suggestion-btn {
        background: #252525;
        border-color: #2d2d2d;
        color: #e5e5e5;
      }
      body.dark-mode .suggestion-btn:hover {
        background: #2d2d2d;
        border-color: #10b981;
      }
      body.dark-mode .flight-card,
      body.dark-mode .card,
      body.dark-mode .search-result-card,
      body.dark-mode .travel-plan-card {
        background: #1a1a1a;
        border-color: #2d2d2d;
        color: #e5e5e5;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }
      body.dark-mode .flight-card:hover,
      body.dark-mode .card:hover {
        background: #252525;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      }
      body.dark-mode .flight-table {
        background: #1a1a1a;
        color: #e5e5e5;
        border: 1px solid #2d2d2d;
      }
      body.dark-mode .flight-table th {
        background: #10b981;
        color: white;
      }
      body.dark-mode .flight-table td {
        border-bottom-color: #2d2d2d;
      }
      body.dark-mode .flight-table tr:hover {
        background: #252525;
      }
      body.dark-mode .tabs {
        background: #1a1a1a;
        border-bottom-color: #2d2d2d;
      }
      body.dark-mode .tab-btn {
        color: #999;
      }
      body.dark-mode .tab-btn.active {
        color: #10b981 !important;
        border-bottom-color: #10b981 !important;
      }
      body.dark-mode .tab-btn:hover {
        color: #10b981;
        background: rgba(16, 185, 129, 0.1);
      }
      body.dark-mode .toggle-view-btn,
      body.dark-mode .dark-mode-toggle {
        background: #252525;
        border-color: #2d2d2d;
        color: #e5e5e5;
      }
      body.dark-mode .toggle-view-btn:hover,
      body.dark-mode .dark-mode-toggle:hover {
        background: #2d2d2d;
        border-color: #10b981;
      }
      body.dark-mode .nav-links a {
        color: #999;
      }
      body.dark-mode .nav-links a:hover {
        color: #10b981;
      }
      body.dark-mode .flight-logo {
        background: #2d2d2d;
      }
      body.dark-mode .flight-time-code {
        color: #e5e5e5;
      }
      body.dark-mode .flight-time-hour {
        color: #999;
      }
      body.dark-mode .flight-price-amount {
        color: #e5e5e5;
      }
      body.dark-mode .flight-price-airline {
        color: #999;
      }
      body.dark-mode .flight-action-link {
        color: #10b981;
      }
      body.dark-mode .flight-more-btn {
        background: #0f172a;
        border-color: #1e293b;
        color: #34d399;
      }
      body.dark-mode .flight-more-btn:hover,
      body.dark-mode .flight-more-btn:focus {
        background: #14532d;
        border-color: #34d399;
        color: #bbf7d0;
      }
      body.dark-mode .flight-more-dropdown {
        background: #111827;
        border-color: #1f2937;
        box-shadow: 0 18px 30px rgba(0, 0, 0, 0.35);
      }
      body.dark-mode .voice-btn {
        color: #999;
      }
      body.dark-mode .voice-btn:hover {
        background: #2d2d2d;
        color: #10b981;
      }
      body.dark-mode .search-form {
        background: #1a1a1a;
        border-bottom-color: #2d2d2d;
      }
      body.dark-mode .results-section {
        background: #0f0f0f;
      }
      body.dark-mode .map-container {
        background: #1a1a1a;
      }
      body.dark-mode .input-field input,
      body.dark-mode .date-input input,
      body.dark-mode .passenger-input input {
        background: #252525;
        border-color: #2d2d2d;
        color: #e5e5e5;
      }
      body.dark-mode .input-field input:focus,
      body.dark-mode .date-input input:focus,
      body.dark-mode .passenger-input input:focus {
        border-color: #10b981;
        background: #2a2a2a;
      }
      body.dark-mode .swap-btn {
        background: #252525;
        border-color: #2d2d2d;
        color: #e5e5e5;
      }
      body.dark-mode .swap-btn:hover {
        border-color: #10b981;
      }

      /* Mobile tabs - hidden on desktop */
      .mobile-tabs {
        display: none;
      }

      /* Mobile responsiveness - Enhanced */
      @media (max-width: 968px) {
        .left-header {
          padding: 8px;
        }
        .toggle-view-btn {
          display: none !important;
        }
        .mobile-tabs {
          display: flex;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 100;
          background: white;
          border-bottom: 2px solid #e0e0e0;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .mobile-tab-btn {
          flex: 1;
          padding: 12px 8px;
          border: none;
          background: none;
          cursor: pointer;
          font-size: 13px;
          font-weight: 500;
          color: #666;
          border-bottom: 3px solid transparent;
          transition: all 0.3s;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        .mobile-tab-btn.active {
          color: #10b981;
          border-bottom-color: #10b981;
          font-weight: 600;
        }
        body.dark-mode .mobile-tabs {
          background: #1a1a1a;
          border-bottom-color: #2d2d2d;
        }
        body.dark-mode .mobile-tab-btn {
          color: #999;
        }
        body.dark-mode .mobile-tab-btn.active {
          color: #10b981;
        }
        .container {
          margin-top: 52px;
        }
        html,
        body {
          width: 100%;
          overflow-x: hidden;
          margin: 0;
          padding: 0;
        }
        .container {
          flex-direction: column;
          height: calc(100vh - 52px);
          width: 100%;
          overflow-x: hidden;
        }
        .left {
          width: 100% !important;
          max-width: 100% !important;
          border-right: none;
          border-bottom: none;
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .right {
          width: 100% !important;
          height: 100%;
          display: none;
        }
        /* Show right panel when any results tab is active */
        body.mobile-flights-active .left,
        body.mobile-hotels-active .left,
        body.mobile-plan-active .left {
          display: none;
        }
        body.mobile-flights-active .right,
        body.mobile-hotels-active .right,
        body.mobile-plan-active .right {
          display: flex;
        }
        /* Show specific tab content on mobile */
        body.mobile-flights-active #tab-flights {
          display: block !important;
        }
        body.mobile-flights-active #tab-hotels,
        body.mobile-flights-active #tab-plan {
          display: none !important;
        }
        body.mobile-hotels-active #tab-hotels {
          display: block !important;
        }
        body.mobile-hotels-active #tab-flights,
        body.mobile-hotels-active #tab-plan {
          display: none !important;
        }
        body.mobile-plan-active #tab-plan {
          display: block !important;
        }
        body.mobile-plan-active #tab-flights,
        body.mobile-plan-active #tab-hotels {
          display: none !important;
        }
        .resize-handle {
          display: none;
        }
        .nav-links {
          display: none;
        }
        /* Hide desktop tabs on mobile */
        .right .tabs {
          display: none;
        }
        .right-header {
          padding: 16px;
        }
        .right-header h2 {
          font-size: 16px;
        }
        .results-section {
          padding-top: 0;
        }
        .tab-btn {
          white-space: nowrap;
          padding: 10px 16px;
          font-size: 14px;
        }
        .flight-info {
          flex-direction: column;
          gap: 12px;
          align-items: flex-start;
        }
        .flight-times {
          width: 100%;
        }
        .flight-price {
          text-align: left;
          width: 100%;
        }
        .cards {
          grid-template-columns: 1fr;
        }
        .chat-input {
          gap: 8px;
        }
        .chat-input input {
          font-size: 16px;
          padding: 12px 16px;
        }
        .left-header {
          padding: 16px;
        }
        .left-header h1 {
          font-size: 18px;
        }
        .chat-content {
          padding: 16px;
          width: 100%;
          overflow-x: hidden;
        }
        .chat-messages {
          width: 100%;
          overflow-x: hidden;
        }
        .msg {
          max-width: 90%;
        }
        .msg.bot {
          max-width: 100%;
          margin-right: 0;
        }
        /* Mobile form responsiveness */
        .details-form-header {
          gap: 12px;
        }
        .details-form-icon {
          width: 44px;
          height: 44px;
        }
        .details-form-icon svg {
          width: 22px;
          height: 22px;
        }
        .details-form-header h4 {
          font-size: 15px;
        }
        .details-form-header p {
          font-size: 12px;
        }
        .details-form-submit,
        .details-form-skip {
          padding: 10px 18px;
          font-size: 13px;
        }
        .flight-table-wrapper {
          margin: 12px -16px;
          width: 100vw;
          max-width: 100vw;
          border-radius: 0;
          overflow-x: auto;
          overflow-y: visible;
          -webkit-overflow-scrolling: touch;
          scrollbar-width: thin;
        }
        .flight-table {
          font-size: 11px;
          border-radius: 0;
          width: auto;
          min-width: 650px;
          display: table;
        }
        .flight-table th,
        .flight-table td {
          padding: 8px 1px;
          font-size: 11px;
          white-space: nowrap;
        }
        .flight-table th:first-child,
        .flight-table td:first-child {
          padding-left: 6px;
          position: sticky;
          left: 0;
          background: #10b981;
          z-index: 1;
        }
        .flight-table td:first-child {
          background: white;
        }
        .flight-table tr:hover td:first-child {
          background: #f8f9fa;
        }
        .flight-table th:last-child,
        .flight-table td:last-child {
          padding-right: 50px;
          min-width: 120px;
        }
        .flight-table-wrapper::-webkit-scrollbar {
          height: 6px;
        }
        .flight-table-wrapper::-webkit-scrollbar-track {
          background: #f1f1f1;
        }
        .flight-table-wrapper::-webkit-scrollbar-thumb {
          background: #10b981;
          border-radius: 3px;
        }
        .chat-input-wrapper {
          padding: 16px;
        }
        .results-section {
          padding: 16px;
          width: 100%;
        }
        .map-container {
          margin: 16px;
          min-height: 300px;
          width: calc(100% - 32px);
        }
        .tabs {
          width: 100%;
          margin: 0;
        }
        .flight-list,
        .cards,
        .search-results-list {
          width: 100%;
        }

        /* Dark mode mobile */
        body.dark-mode .left {
          border-bottom-color: #2d2d2d;
        }
      }

      @media (max-width: 640px) {
        .left-header {
          padding: 8px;
        }
        html,
        body {
          max-width: 100vw;
          overflow-x: hidden;
        }
        .container {
          max-width: 100vw;
        }
        .left,
        .right {
          max-width: 100vw !important;
        }
        .left-header h1 {
          font-size: 16px;
        }
        .right-header h2 {
          font-size: 14px;
        }
        .right-header {
          padding: 12px;
        }
        .msg {
          max-width: 90%;
          font-size: 14px;
          padding: 12px 14px;
        }
        .msg.bot {
          max-width: 100%;
          margin-right: 0;
        }
        /* Extra small screens - compact form */
        .details-form-header {
          gap: 10px;
        }
        .details-form-icon {
          width: 40px;
          height: 40px;
        }
        .details-form-icon svg {
          width: 20px;
          height: 20px;
        }
        .details-form-header h4 {
          font-size: 14px;
        }
        .details-form-header p {
          font-size: 11px;
        }
        .details-form-submit,
        .details-form-skip {
          padding: 9px 16px;
          font-size: 12px;
        }
        .flight-table-wrapper {
          margin-left: -12px;
          margin-right: -12px;
          width: 100vw;
          max-width: 100vw;
          border-radius: 0;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
        .flight-table {
          border-radius: 0;
          width: auto;
          min-width: 650px;
        }
        .flight-table th,
        .flight-table td {
          padding: 8px 1px;
          font-size: 10px;
          white-space: nowrap;
        }
        .flight-table th:first-child,
        .flight-table td:first-child {
          padding-left: 4px;
          position: sticky;
          left: 0;
          background: #10b981;
          z-index: 1;
        }
        .flight-table td:first-child {
          background: white;
        }
        body.dark-mode .flight-table td:first-child {
          background: #1a1a1a;
        }
        body.dark-mode .flight-table tr:hover td:first-child {
          background: #252525;
        }
        .flight-table tr:hover td:first-child {
          background: #f8f9fa;
        }
        .flight-table th:last-child,
        .flight-table td:last-child {
          padding-right: 50px;
          min-width: 120px;
        }
        .flight-table .airline-logo-small {
          width: 20px;
          height: 20px;
        }
        .flight-card {
          flex-direction: column;
          padding: 16px;
          gap: 16px;
          align-items: flex-start;
        }
        .flight-logo {
          width: 40px;
          height: 40px;
        }
        .flight-times {
          flex-wrap: wrap;
          gap: 12px;
        }
        .flight-time-code {
          font-size: 16px;
        }
        .flight-time-hour {
          font-size: 13px;
        }
        .flight-route {
          width: 100%;
        }
        .flight-duration {
          min-width: auto;
        }
        .flight-price {
          text-align: left;
          margin-top: 8px;
          width: 100%;
        }
        .flight-price-amount {
          font-size: 20px;
        }
        .route-inputs {
          flex-direction: column;
          gap: 12px;
        }
        .swap-btn {
          transform: rotate(90deg);
          align-self: center;
        }
        .swap-btn:hover {
          transform: rotate(270deg);
        }
        .date-passenger-row {
          flex-direction: column;
          gap: 12px;
        }
        .passenger-input {
          width: 100%;
        }
        .input-field input,
        .date-input input,
        .passenger-input input {
          font-size: 16px; /* Prevent zoom on iOS */
        }
        .toggle-group {
          flex-direction: column;
          gap: 12px;
        }
        .tabs {
          padding: 0 12px;
          gap: 4px;
          margin-bottom: 12px;
        }
        .tab-btn {
          padding: 10px 12px;
          font-size: 13px;
        }
        .chat-content {
          padding: 12px;
        }
        .chat-content {
          padding: 12px;
        }
        .chat-input-wrapper {
          padding: 12px;
        }
        .results-section {
          padding: 12px;
        }
        .suggestion-btn {
          padding: 10px 14px;
          font-size: 13px;
        }
        .card-content {
          padding: 16px;
        }
        .card-title {
          font-size: 16px;
        }
        .travel-plan-card {
          padding: 16px;
          font-size: 14px;
        }
        .search-result-card {
          padding: 16px;
        }
        .search-result-title {
          font-size: 16px;
        }
        .header-actions {
          width: 100%;
          justify-content: space-between;
        }
        .toggle-view-btn {
          font-size: 13px;
          padding: 6px 12px;
        }
        .toggle-view-btn svg {
          width: 14px;
          height: 14px;
        }
        .dark-mode-toggle {
          width: 36px;
          height: 36px;
          font-size: 16px;
        }
        .voice-btn {
          width: 36px;
          height: 36px;
        }
        .voice-btn svg {
          width: 18px;
          height: 18px;
        }
        .chat-input button {
          width: 36px;
          height: 36px;
        }
        .chat-input button svg {
          width: 18px;
          height: 18px;
        }
        .flight-table .airline-logo-small {
          width: 20px;
          height: 20px;
        }
        .chat-content {
          padding: 12px;
        }
      }

      @media (max-width: 380px) {
        .left-header {
          padding: 8px;
        }

        .left-header h1 {
          font-size: 14px;
        }
        .msg {
          font-size: 13px;
          padding: 10px 12px;
        }
        .flight-time-code {
          font-size: 14px;
        }
        .flight-price-amount {
          font-size: 18px;
        }
        .tab-btn {
          padding: 8px 10px;
          font-size: 12px;
        }
        .card img {
          height: 160px;
        }
      }

      /* Touch optimization */
      @media (hover: none) and (pointer: coarse) {
        .suggestion-btn,
        .tab-btn,
        .toggle-view-btn,
        .dark-mode-toggle,
        .voice-btn,
        .search-btn,
        .swap-btn {
          -webkit-tap-highlight-color: rgba(16, 185, 129, 0.2);
        }

        .suggestion-btn:hover,
        .tab-btn:hover,
        .toggle-view-btn:hover,
        .dark-mode-toggle:hover,
        .voice-btn:hover {
          transform: none;
        }

        .suggestion-btn:active,
        .search-btn:active,
        .swap-btn:active {
          transform: scale(0.98);
        }

        .flight-card:hover,
        .card:hover {
          transform: none;
        }
      }

      /* Landscape mobile optimization */
      @media (max-width: 968px) and (orientation: landscape) {
        .container {
          flex-direction: row;
        }
        .left {
          width: 50%;
          max-width: 50%;
          border-right: 1px solid #e0e0e0;
          border-bottom: none;
        }
        .right {
          width: 50%;
        }
        body.dark-mode .left {
          border-right-color: #2d2d2d;
          border-bottom: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Mobile-only top tabs -->
    <div class="mobile-tabs">
      <button class="mobile-tab-btn active" data-mobile-tab="chat">
        üí¨ Chat
      </button>
      <button class="mobile-tab-btn" data-mobile-tab="flights">
        ‚úàÔ∏è Flights
      </button>
      <button class="mobile-tab-btn" data-mobile-tab="hotels">üè® Hotels</button>
      <button class="mobile-tab-btn" data-mobile-tab="plan">üìã Plan</button>
    </div>
    <div class="container">
      <!-- Left Panel -->
      <section class="left" id="leftPanel">
        <div class="resize-handle" id="resizeHandle"></div>
        <div class="left-header">
          <img src="/logo.png" alt="Logo" style="height: 50px" />
        </div>

        <!-- Chat Section -->
        <div class="chat-section">
          <div class="chat-content">
            <div class="suggestions">
              <p>Looking for flights? We've got a few ideas.</p>
              <button
                class="suggestion-btn"
                data-suggestion="Direct flights from Mumbai to Hyderabad"
              >
                Direct flights from Mumbai to Hyderabad
              </button>
              <button
                class="suggestion-btn"
                data-suggestion="Mumbai to Singapore for me and three friends on Jan 26th"
              >
                Mumbai to Singapore for me and three friends on Jan 26th
              </button>
              <button
                class="suggestion-btn"
                data-suggestion="Round trip to Delhi for 2 adults"
              >
                Round trip to Delhi for 2 adults
              </button>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
          </div>
          <div class="chat-input-wrapper">
            <div class="chat-input">
              <button id="voiceBtn" class="voice-btn" title="Voice input">
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"
                  />
                  <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                  <line x1="12" y1="19" x2="12" y2="23" />
                  <line x1="8" y1="23" x2="16" y2="23" />
                </svg>
              </button>
              <button
                id="voiceOutputBtn"
                class="voice-btn"
                title="Toggle voice output (speak aloud)"
              >
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path d="M11 5L6 9H2v6h4l5 4V5z" />
                  <path
                    d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"
                  />
                </svg>
              </button>
              <input
                type="text"
                id="chatInput"
                placeholder="Your trip details"
              />
              <button id="chatSendBtn">
                <svg
                  width="20"
                  height="20"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Right Panel -->
      <section class="right">
        <div class="right-header">
          <h2 id="tripTitle">Your trip</h2>
          <div class="header-actions">
            <button
              id="toggleView"
              class="toggle-view-btn"
              style="display: none"
            >
              <svg
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
                />
              </svg>
              <span id="toggleViewText">Show map</span>
            </button>
            <button
              id="darkModeToggle"
              class="dark-mode-toggle"
              title="Toggle dark mode"
            >
              üåô
            </button>
            <div class="nav-links">
              <a href="#" id="newSearch">+ New search</a>
              <a href="#">Sign in</a>
            </div>
          </div>
        </div>
        <div class="map-container" id="mapContainer" style="display: none">
          <div id="map"></div>
        </div>
        <div class="results-section" id="resultsSection">
          <div class="trip-form-container" id="tripFormContainer">
            <div class="trip-form-top">
              <div class="trip-type-toggle" role="tablist" aria-label="Trip type">
                <button
                  type="button"
                  class="trip-type-btn active"
                  data-trip-type="round"
                  aria-pressed="true"
                >
                  Round Trip
                </button>
                <button
                  type="button"
                  class="trip-type-btn"
                  data-trip-type="oneway"
                  aria-pressed="false"
                >
                  One Way
                </button>
              </div>
              <label class="hidden-city-control" for="hiddenCityToggle">
                <input type="checkbox" id="hiddenCityToggle" />
                <span class="toggle-pill" aria-hidden="true"></span>
                <span class="hidden-city-label">Search hidden-city flights</span>
              </label>
            </div>
            <form id="tripForm" class="trip-form" novalidate>
              <div class="form-row location-row">
                <div class="form-field" id="originField">
                  <label for="originInput" class="field-label">Leaving from</label>
                  <input
                    type="text"
                    id="originInput"
                    class="field-input"
                    placeholder="City or airport"
                    autocomplete="off"
                  />
                </div>
                <button
                  type="button"
                  class="swap-btn"
                  id="swapLocations"
                  title="Swap origin and destination"
                >
                  ‚Üî
                </button>
                <div class="form-field" id="destinationField">
                  <label for="destinationInput" class="field-label">Going to</label>
                  <input
                    type="text"
                    id="destinationInput"
                    class="field-input"
                    placeholder="City or airport"
                    autocomplete="off"
                  />
                </div>
              </div>
              <div class="form-row date-row">
                <div class="form-field" id="departField">
                  <label for="departInput" class="field-label">Departing on</label>
                  <input type="date" id="departInput" class="field-input" />
                </div>
                <div class="form-field" id="returnField">
                  <label for="returnInput" class="field-label">Returning on</label>
                  <input type="date" id="returnInput" class="field-input" />
                </div>
                <div class="form-field passenger-field" id="passengerField">
                  <label class="field-label">Passengers</label>
                  <button
                    type="button"
                    class="field-trigger"
                    id="passengerBtn"
                    aria-haspopup="dialog"
                    aria-expanded="false"
                  >
                    <span id="passengerSummary">1 Adult</span>
                    <span class="field-suffix">Edit</span>
                  </button>
                  <div
                    class="passenger-popover"
                    id="passengerPopover"
                    role="dialog"
                    aria-modal="true"
                    aria-labelledby="passengerBtn"
                  >
                    <div class="passenger-row" data-type="adults">
                      <div>
                        <strong>Adults</strong>
                        <span>Aged 12+</span>
                      </div>
                      <div class="counter-controls">
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="decrement"
                          aria-label="Decrease adults"
                        >
                          -
                        </button>
                        <span
                          class="counter-value"
                          data-count="adults"
                          aria-live="polite"
                        >
                          1
                        </span>
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="increment"
                          aria-label="Increase adults"
                        >
                          +
                        </button>
                      </div>
                    </div>
                    <div class="passenger-row" data-type="children">
                      <div>
                        <strong>Children</strong>
                        <span>Aged 2-11</span>
                      </div>
                      <div class="counter-controls">
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="decrement"
                          aria-label="Decrease children"
                        >
                          -
                        </button>
                        <span
                          class="counter-value"
                          data-count="children"
                          aria-live="polite"
                        >
                          0
                        </span>
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="increment"
                          aria-label="Increase children"
                        >
                          +
                        </button>
                      </div>
                    </div>
                    <div class="passenger-row" data-type="infantsSeat">
                      <div>
                        <strong>Infants</strong>
                        <span>In seat</span>
                      </div>
                      <div class="counter-controls">
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="decrement"
                          aria-label="Decrease infants in seat"
                        >
                          -
                        </button>
                        <span
                          class="counter-value"
                          data-count="infantsSeat"
                          aria-live="polite"
                        >
                          0
                        </span>
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="increment"
                          aria-label="Increase infants in seat"
                        >
                          +
                        </button>
                      </div>
                    </div>
                    <div class="passenger-row" data-type="infantsLap">
                      <div>
                        <strong>Infants</strong>
                        <span>On lap</span>
                      </div>
                      <div class="counter-controls">
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="decrement"
                          aria-label="Decrease lap infants"
                        >
                          -
                        </button>
                        <span
                          class="counter-value"
                          data-count="infantsLap"
                          aria-live="polite"
                        >
                          0
                        </span>
                        <button
                          type="button"
                          class="counter-btn"
                          data-action="increment"
                          aria-label="Increase lap infants"
                        >
                          +
                        </button>
                      </div>
                    </div>
                    <div class="passenger-footer">
                      <button type="button" class="passenger-done" id="passengerDoneBtn">
                        Done
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row">
                <div class="form-field full" id="stopsField">
                  <label class="field-label">Stops</label>
                  <div class="stops-group" role="radiogroup">
                    <button
                      type="button"
                      class="stop-chip active"
                      data-stops-option="nonstop"
                      aria-pressed="true"
                    >
                      Nonstop
                    </button>
                    <button
                      type="button"
                      class="stop-chip"
                      data-stops-option="oneStop"
                      aria-pressed="false"
                    >
                      Up to 1 stop
                    </button>
                    <button
                      type="button"
                      class="stop-chip"
                      data-stops-option="any"
                      aria-pressed="false"
                    >
                      Any number of stops
                    </button>
                  </div>
                </div>
              </div>
              <div class="form-actions">
                <div id="formError" class="form-error" role="alert"></div>
                <button type="submit" class="trip-submit">
                  <svg
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M3 11l18-8-5 17-4-6-6-3z" />
                    <path d="M13 13l6 6" />
                  </svg>
                  Send to chat
                </button>
              </div>
            </form>
          </div>
          <div class="tabs">
            <button class="tab-btn active" data-tab="flights">
              ‚úàÔ∏è Flights
            </button>
            <button class="tab-btn" data-tab="hotels">üè® Hotels</button>
            <button class="tab-btn" data-tab="plan">üìã Travel Plan</button>
          </div>
          <div id="tab-flights" class="tab-content">
            <div id="flights" class="flight-list"></div>
          </div>
          <div id="tab-hotels" class="tab-content" style="display: none">
            <div id="hotels" class="cards"></div>
          </div>
          <div id="tab-plan" class="tab-content" style="display: none">
            <div id="itinerary" class="travel-plan-card"></div>
            <div
              id="searchResults"
              class="search-results-list"
              style="margin-top: 20px"
            ></div>
          </div>
        </div>
      </section>
    </div>
  </body>
</html>
